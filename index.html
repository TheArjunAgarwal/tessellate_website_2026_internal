<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tessellate Schedule</title>
    <link href="https://fonts.googleapis.com/css2?family=Jersey+20&family=Lexend:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">

</head>
<body>

    <nav>
        <div class="nav-container">
            <div class="logo" onclick="app.setPage('day1')">
                TESSELLATE
                <img src="spon-logo.png" class="nav-spon-logo" alt="Sponsor">
            </div>

            <div class="desktop-nav">
                <button class="nav-btn nav-btn-pink" onclick="app.setPage('ongoing')" id="btn-ongoing">Ongoing</button>
                <button class="nav-btn nav-btn-blue" onclick="app.setPage('day1')" id="btn-day1">Day 1</button>
                <button class="nav-btn nav-btn-blue" onclick="app.setPage('day2')" id="btn-day2">Day 2</button>
                <button class="nav-btn nav-btn-blue" onclick="app.setPage('day3')" id="btn-day3">Day 3</button>
                <button class="nav-btn nav-btn-blue" onclick="app.setPage('day4')" id="btn-day4">Day 4</button>
                <button class="nav-btn nav-btn-mango" onclick="app.setPage('heads')" id="btn-heads">Heads</button>
                <button class="nav-btn nav-btn-gold" onclick="app.setPage('sponsors')" id="btn-sponsors">Sponsors</button>
                <a href="https://calendar.google.com" target="_blank" style="margin-left: 15px; color: #aaa;"><i data-lucide="calendar" size="28"></i></a>
            </div>

            <button class="mobile-btn" onclick="app.toggleMenu()">
                <i data-lucide="menu" id="menu-icon" size="32"></i>
            </button>
        </div>

        <div id="mobile-menu">
            </div>
    </nav>

    <main>
        <div class="content-container" id="content-root">
            </div>
    </main>

    <footer>
        <img src="spon-logo.png" class="footer-spon-logo" alt="Sponsor Logo"><br>
        <p style="letter-spacing: 3px; margin-bottom: 15px; color: #555; font-weight: bold;">CMI TESSELLATE 2026</p>
        <div style="display: flex; justify-content: center; gap: 30px;">
            <a href="https://tessellate.cmi.ac.in/stems/" style="color: #aaa; text-decoration: none;">STEMS</a>
            <a href="https://www.cmi.ac.in/" style="color: #aaa; text-decoration: none;">CMI.AC.IN</a>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const DATA = {
                    events: {},
                    ongoing: [],
                    heads: []
                    };
        async function loadData() {
        const [eventsRes, ongoingRes, headsRes] = await Promise.all([
            fetch('data/events.json'),
            fetch('data/ongoing.json'),
            fetch('data/heads.json')
        ]);

        DATA.events = await eventsRes.json();
        DATA.ongoing = await ongoingRes.json();
        DATA.heads = await headsRes.json();
        }

        // --- APP LOGIC ---
        const app = {
            currentPage: 'day1',
            menuOpen: false,

            init() {
                this.render();
                lucide.createIcons();
            },

            setPage(pageId) {
                this.currentPage = pageId;
                this.menuOpen = false;
                this.render();
                window.scrollTo(0,0);
            },

            toggleMenu() {
                this.menuOpen = !this.menuOpen;
                const menu = document.getElementById('mobile-menu');
                const icon = document.getElementById('menu-icon');
                
                if (this.menuOpen) {
                    menu.style.display = 'flex';
                    icon.setAttribute('data-lucide', 'x');
                    this.renderMobileMenu();
                } else {
                    menu.style.display = 'none';
                    icon.setAttribute('data-lucide', 'menu');
                }
                lucide.createIcons();
            },

            render() {
                const root = document.getElementById('content-root');
                const menu = document.getElementById('mobile-menu');
                menu.style.display = 'none'; // Close menu on render

                // Update active states on desktop buttons
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                const activeBtn = document.getElementById(`btn-${this.currentPage}`);
                if (activeBtn) activeBtn.classList.add('active');

                let html = '';

                if (this.currentPage === 'heads') {
                    html += `<h2 style="color: var(--blue)">Committee</h2>`;
                    DATA.heads.forEach(head => {
                        html += `
                        <div class="committee-card">
                            <div>
                                <div class="comm-role">${head.role}</div>
                                <div class="comm-name">${head.name}</div>
                            </div>
                            <div class="comm-actions">
                                <a href="tel:${head.phone}" style="color: var(--blue)"><i data-lucide="phone"></i></a>
                                <a href="mailto:${head.email}" style="color: var(--pink)"><i data-lucide="mail"></i></a>
                            </div>
                        </div>`;
                    });
                } else if (this.currentPage === 'sponsors') {
                    // NEW: Special Sponsors Page Logic
                    html += `<h2 style="color: var(--gold)">Our Partners</h2>`;
                    html += `
                        <div style="text-align: center; margin-top: 40px;">
                            <div class="event-card" style="border-left: 6px solid var(--gold); display: inline-block; max-width: 500px; padding: 40px;">
                                <h3 class="card-title" style="color: var(--gold); margin-bottom: 30px;">Title Sponsor</h3>
                                <img src="spon-logo.png" style="max-width: 100%; height: auto; margin-bottom: 20px;">
                                <p class="description">We are proud to be supported by Michelin. Michelin is world's leading manufacturer of tyres and automobile parts. To maintain such excellence, one needs data and analysis. This makes Michelin the place to be for the top data science talent. And need not mention the ever prestigious Michelin star.</p>
                                <p class = "description"> Thank you Michelin for sponsoring us!</p>
                                </div>
                            </div>
                        </div>
                    `;
                } else if (this.currentPage === 'ongoing') {
                    html += `<h2 style="color: var(--pink)">Ongoing</h2>`;
                    DATA.ongoing.forEach(event => { html += this.createEventCard(event); });
                } else {
                    const day = this.currentPage;
                    html += `<h2 style="color: var(--mango)">Day 
                        ${day.slice(-1)} (${Number(day.slice(-1)) + 22} January) Schedule</h2>`;
                    DATA.events[day].forEach(event => { html += this.createEventCard(event); });
                }

                root.innerHTML = html;
                lucide.createIcons();
            },

            createEventCard(event) {
                const borderCol = event.type === 'CMI Only' ? 'var(--pink)' : 'var(--blue)';
                return `
                <div class="event-card" style="border-left: 6px solid ${borderCol}">
                    <div class="card-header">
                        <h3 class="card-title">${event.title}</h3>
                        <span class="type-badge" style="background-color: ${borderCol}">${event.type}</span>
                    </div>
                    <div class="meta-info">
                        <div class="meta-item"><i data-lucide="clock" size="16" style="color: var(--blue)"></i> ${event.time || 'Ongoing'}</div>
                        ${event.location ? `<div class="meta-item"><i data-lucide="map-pin" size="16" style="color: var(--pink)"></i> ${event.location}</div>` : ''}
                    </div>
                    <p class="description">${event.description}</p>
                    <div class="card-footer">
                        <div class="contact-pill">
                            <i data-lucide="phone" size="14" style="margin-right: 8px; opacity: 0.8"></i>
                            ${event.contactPerson}
                        </div>
                        ${event.link ? `<a href="${event.link}" target="_blank" class="details-link">Details â†’</a>` : ''}
                    </div>
                </div>`;
            },

            renderMobileMenu() {
                const menu = document.getElementById('mobile-menu');
                menu.innerHTML = `
                    <button onclick="app.setPage('ongoing')" style="padding: 18px; background: #2a2a2a; border-radius: 8px; border: none; color: var(--pink); font-weight: bold; font-size: 1.2rem; font-family: var(--font-heading)">Ongoing Events</button>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px">
                        <button onclick="app.setPage('day1')" style="padding: 15px; background: #2a2a2a; border-radius: 8px; border: none; color: var(--blue); font-weight: bold; font-family: var(--font-heading)">Day 1</button>
                        <button onclick="app.setPage('day2')" style="padding: 15px; background: #2a2a2a; border-radius: 8px; border: none; color: var(--blue); font-weight: bold; font-family: var(--font-heading)">Day 2</button>
                        <button onclick="app.setPage('day3')" style="padding: 15px; background: #2a2a2a; border-radius: 8px; border: none; color: var(--blue); font-weight: bold; font-family: var(--font-heading)">Day 3</button>
                        <button onclick="app.setPage('day4')" style="padding: 15px; background: #2a2a2a; border-radius: 8px; border: none; color: var(--blue); font-weight: bold; font-family: var(--font-heading)">Day 4</button>
                    </div>
                    <button onclick="app.setPage('heads')" style="padding: 18px; background: #2a2a2a; border-radius: 8px; border: none; color: var(--mango); font-weight: bold; font-size: 1.2rem; font-family: var(--font-heading)">Core Contacts</button>
                    <button onclick="app.setPage('sponsors')" style="padding: 18px; background: #2a2a2a; border-radius: 8px; border: none; color: var(--gold); font-weight: bold; font-size: 1.2rem; font-family: var(--font-heading)">Sponsors</button>
                `;
            }
        };

        async function loadData() {
            const [eventsRes, ongoingRes, headsRes] = await Promise.all([
                fetch('data/events.json'),
                fetch('data/ongoing.json'),
                fetch('data/heads.json')
            ]);

            DATA.events = await eventsRes.json();
            DATA.ongoing = await ongoingRes.json();
            DATA.heads = await headsRes.json();
        }

        window.onload = async () => {
  await loadData();
  app.init();
};

    </script>
</body>
</html>